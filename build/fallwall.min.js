/*!
 * Fallwall.js
 *
 * Copyright Â© 2015 Eddie Wen | MIT license
 * https://github.com/EddieWen-Taiwan/Fallwall.js
 */
!function(r,n){"use strict";"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],n):r.Fallwall=n(jQuery)}(this,function(r){"use strict";var n={},e=function(r,e){for(var i=0;i<n.gridNumber&&"undefined"!=typeof r[i];i++)t(r[i],"down"),n.currentGrid=i;e&&("function"==typeof e?e():console.error(e+" is not a function"))},t=function(e,t){for(var o=n.html_template,f=0;f<Object.keys(e).length;f++)o=o.replace("fallwall_#"+(f+1),e[f]);var u,a=r(".fw_column").eq(i());"up"==t?(a.prepend(o),u=a.find(".fw_grid").first()):(a.append(o),u=a.find(".fw_grid").last()),""!=n.defaultClass&&u.addClass(n.defaultClass)},i=function(){var n=[];r.each(r(".fw_column"),function(r,e){n.push(e.offsetHeight)});var e=Math.min.apply(null,n);return r.inArray(e,n)};r.fn.fallwall_init=function(t,i,o,f){if(null==t||null==i)throw new Error("You missed some parameters while initializing");n=r.extend({gridNumber:20,columnNumber:1,defaultClass:"",html_template:"<div class='fw_grid'>"+t+"</div>",dataArray:i,currentGrid:0},o);for(var u="",a=0;a<n.columnNumber;a++)u+="<div class='fw_column'></div>";this.append(u),this.find(".fw_column").css({display:"inline-block","vertical-align":"top",width:100/n.columnNumber+"%"}),e(i,f)},r.fn.loadMoreFw=function(r){if(n.currentGrid+1<n.dataArray.length){n.currentGrid++;for(var e=n.currentGrid+n.gridNumber,i=n.currentGrid;e>i;i++){if("undefined"==typeof n.dataArray[i])return r&&("function"==typeof r?r():console.error(r+" is not a function")),"NO_MORE_DATA";if(t(n.dataArray[i],"down"),n.currentGrid=i,i==e-1)return r&&("function"==typeof r?r():console.error(r+" is not a function")),"FINISHED"}}return"NO_MORE_DATA"},r.fn.addFwGrid=function(r,n){if("object"!=typeof r)throw new Error("First parameter of addFwGrid(): "+r+" must be Object");t(r,"up"),n&&("function"==typeof n?n():console.error(n+" is not a function"))}});